<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detection Analytics Dashboard | InvEye CloudTuner.ai</title>
    <meta name="description" content="Real-time CCTV detection and security monitoring powered by InvEye AI">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== InvEye Detection Dashboard Theme ===== */
        :root {
            --bg-primary: #F8FAFC;
            --bg-secondary: #FFFFFF;
            --bg-card: #FFFFFF;
            --accent-primary: #1E3A8A;
            --accent-secondary: #3B82F6;
            --accent-light: #60A5FA;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            --critical: #DC2626;
            --critical-bg: #FEE2E2;
            --high: #EA580C;
            --high-bg: #FFF7ED;
            --medium: #D97706;
            --medium-bg: #FFFBEB;
            --low: #65A30D;
            --low-bg: #F7FEE7;
            --success: #22C55E;
            --success-bg: #DCFCE7;
            --warning: #F59E0B;
            --warning-bg: #FEF3C7;
            --danger: #EF4444;
            --danger-bg: #FEE2E2;
            --info: #3B82F6;
            --info-bg: #DBEAFE;
            --global: #7C3AED;
            --global-bg: #EDE9FE;
            --border-color: #E2E8F0;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
        }

        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .brand {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .tagline {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .header-center {
            flex: 1;
            margin: 0 2rem;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .breadcrumb a {
            color: var(--accent-secondary);
            text-decoration: none;
        }

        .location-bar {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.875rem;
        }

        .location-id {
            font-weight: 600;
            color: var(--text-primary);
        }

        .location-name {
            color: var(--text-secondary);
        }

        .location-time {
            color: var(--text-muted);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-primary {
            padding: 0.5rem 1rem;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: #1e3370;
            transform: translateY(-1px);
        }

        .btn-secondary {
            padding: 0.5rem 1rem;
            background: transparent;
            color: var(--accent-primary);
            border: 1px solid var(--accent-primary);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--accent-primary);
            color: white;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--bg-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1px;
            background: var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }

        .stat-item {
            background: var(--bg-secondary);
            padding: 1rem 1.5rem;
            text-align: center;
            transition: background 0.2s;
        }

        .stat-item:hover {
            background: var(--bg-primary);
        }

        .stat-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-value.highlight-green {
            color: var(--success);
        }

        .stat-value.highlight-red {
            color: var(--critical);
        }

        .stat-value.highlight-orange {
            color: var(--high);
        }

        .main-content {
            padding: 1.5rem;
            max-width: 1500px;
            margin: 0 auto;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .card-header h3 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .badge-count {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            background: var(--danger-bg);
            color: var(--danger);
            border-radius: 100px;
            font-weight: 500;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
            margin-right: 0.5rem;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.4;
            }
        }

        .top-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .camera-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            padding: 1rem;
        }

        .camera-feed {
            aspect-ratio: 16/10;
            background: linear-gradient(135deg, #1E293B 0%, #334155 100%);
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .camera-feed:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-md);
        }

        .camera-feed.critical {
            border: 2px solid var(--critical);
            animation: criticalPulse 2s infinite;
        }

        @keyframes criticalPulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4);
            }

            50% {
                box-shadow: 0 0 0 8px rgba(220, 38, 38, 0);
            }
        }

        .feed-content {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .detection-overlay {
            position: absolute;
            inset: 0;
        }

        .feed-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 0.5rem 0.75rem;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cam-label {
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .cam-status {
            color: #22C55E;
            font-size: 0.7rem;
        }

        .cam-status.warning {
            color: #F59E0B;
        }

        .cam-status.critical {
            color: #EF4444;
            font-weight: 600;
        }

        .people-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(59, 130, 246, 0.9);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .people-badge.critical {
            background: rgba(220, 38, 38, 0.9);
        }

        .alerts-list {
            padding: 0.5rem;
            max-height: 320px;
            overflow-y: auto;
        }

        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: var(--radius-sm);
            margin-bottom: 0.5rem;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }

        .alert-item:hover {
            transform: translateX(4px);
        }

        .alert-item.critical {
            background: var(--critical-bg);
            border-left-color: var(--critical);
        }

        .alert-item.medium {
            background: var(--medium-bg);
            border-left-color: var(--medium);
        }

        .alert-item.global {
            background: var(--global-bg);
            border-left-color: var(--global);
        }

        .alert-icon {
            font-size: 1.25rem;
        }

        .alert-content {
            flex: 1;
        }

        .alert-text {
            display: block;
            font-size: 0.8rem;
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 0.125rem;
        }

        .alert-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .alert-time {
            font-size: 0.7rem;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .kpi-section {
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .section-badge {
            font-size: 0.65rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .section-badge.industry {
            background: var(--info-bg);
            color: var(--info);
        }

        .kpi-grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.25rem;
        }

        .kpi-card-large {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .kpi-card-large:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }

        .kpi-card-large.critical {
            border-top: 4px solid var(--critical);
        }

        .kpi-card-large.medium {
            border-top: 4px solid var(--medium);
        }

        .kpi-card-large.global {
            border-top: 4px solid var(--global);
        }

        .kpi-card-large.success {
            border-top: 4px solid var(--success);
        }

        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: var(--bg-primary);
        }

        .kpi-severity {
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
        }

        .kpi-severity.critical {
            background: var(--critical-bg);
            color: var(--critical);
        }

        .kpi-severity.medium {
            background: var(--medium-bg);
            color: var(--medium);
        }

        .kpi-severity.global {
            background: var(--global-bg);
            color: var(--global);
        }

        .kpi-severity.success {
            background: var(--success-bg);
            color: var(--success);
        }

        .kpi-icon-large {
            font-size: 1.75rem;
        }

        .kpi-body {
            padding: 1.25rem;
        }

        .kpi-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .kpi-description {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .kpi-stats {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .kpi-main-value {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }

        .kpi-main-value.critical {
            color: var(--critical);
        }

        .kpi-main-value.medium {
            color: var(--medium);
        }

        .kpi-main-value.success {
            color: var(--success);
        }

        .kpi-main-value.global {
            color: var(--global);
        }

        .kpi-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .kpi-detail-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
        }

        .detail-label {
            color: var(--text-muted);
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .trend-up {
            color: var(--critical);
        }

        .trend-good {
            color: var(--success);
        }

        .kpi-footer {
            padding: 0.875rem 1.25rem;
            border-top: 1px solid var(--border-color);
            background: var(--bg-primary);
        }

        .kpi-action {
            font-size: 0.8rem;
            color: var(--accent-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: color 0.2s;
        }

        .kpi-action:hover {
            color: var(--accent-primary);
        }

        .charts-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-card {
            min-height: 300px;
        }

        .horizontal-bars {
            padding: 1.25rem;
        }

        .bar-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .bar-item:last-child {
            margin-bottom: 0;
        }

        .bar-label {
            width: 100px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .bar-track {
            flex: 1;
            height: 24px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            padding-left: 8px;
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .bar-fill.person {
            background: linear-gradient(90deg, #3B82F6, #60A5FA);
        }

        .bar-fill.chair {
            background: linear-gradient(90deg, #8B5CF6, #A78BFA);
        }

        .bar-fill.laptop {
            background: linear-gradient(90deg, #22C55E, #4ADE80);
        }

        .bar-fill.tv {
            background: linear-gradient(90deg, #F59E0B, #FBBF24);
        }

        .bar-fill.potted-plant {
            background: linear-gradient(90deg, #10B981, #34D399);
        }

        .bar-fill.other {
            background: linear-gradient(90deg, #64748B, #94A3B8);
        }

        .bar-value {
            width: 60px;
            text-align: right;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-container {
            padding: 1rem;
            height: 240px;
        }

        .full-width-card {
            margin-bottom: 1.5rem;
        }

        .table-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-input {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            width: 200px;
            transition: border-color 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-secondary);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 0.875rem 1.25rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            background: var(--bg-primary);
        }

        .data-table td {
            font-size: 0.85rem;
        }

        .data-table tr:hover {
            background: var(--bg-primary);
        }

        .data-table .warning-row {
            background: #FEF2F2;
        }

        .data-table .warning-row:hover {
            background: #FEE2E2;
        }

        .type-badge {
            display: inline-flex;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .type-badge.metric {
            background: var(--info-bg);
            color: var(--info);
        }

        .type-badge.event {
            background: var(--critical-bg);
            color: var(--critical);
        }

        .status-badge {
            display: inline-flex;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .status-badge.safe {
            background: var(--success-bg);
            color: var(--success);
        }

        .status-badge.critical {
            background: var(--critical-bg);
            color: var(--critical);
        }

        .detection-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .detection-tag {
            background: var(--bg-primary);
            color: var(--text-secondary);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7rem;
        }

        .confidence-bar {
            width: 80px;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            background: var(--success);
        }

        .footer {
            padding: 1.5rem;
            text-align: center;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .version {
            color: var(--accent-secondary);
        }

        @media (max-width: 1200px) {
            .kpi-grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .stats-bar {
                grid-template-columns: repeat(3, 1fr);
            }

            .top-row,
            .charts-row {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }

            .header {
                flex-direction: column;
                gap: 1rem;
            }

            .header-center {
                margin: 0;
            }

            .kpi-grid-4 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <svg class="logo-icon" width="40" height="40" viewBox="0 0 40 40">
                    <defs>
                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#1E3A8A" />
                            <stop offset="100%" style="stop-color:#3B82F6" />
                        </linearGradient>
                    </defs>
                    <circle cx="20" cy="20" r="18" fill="url(#logoGrad)" />
                    <path d="M12 20 L20 12 L28 20 L20 28 Z" fill="white" opacity="0.9" />
                    <circle cx="20" cy="20" r="4" fill="white" />
                </svg>
                <div class="logo-text">
                    <span class="brand">InvEye</span>
                    <span class="tagline">CloudTuner.ai</span>
                </div>
            </div>
        </div>

        <div class="header-center">
            <div class="breadcrumb">
                <a href="#">Dashboard</a> / <span>Detection Analytics</span>
            </div>
            <div class="location-bar">
                <span class="location-id">HEAD_OFFICE</span>
                <span class="location-name">‚Ä¢ Real-time Detection Monitoring</span>
                <span class="location-time" id="currentTime"></span>
            </div>
        </div>

        <div class="header-right">
            <button class="btn-secondary">üìä Export Report</button>
            <button class="btn-primary">üîî Alerts</button>
            <div class="user-avatar">üë§</div>
        </div>
    </header>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stat-item">
            <span class="stat-label">Total Cameras</span>
            <span class="stat-value" id="totalCameras">4</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Active Events</span>
            <span class="stat-value highlight-red" id="activeEvents">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Total People Detected</span>
            <span class="stat-value" id="totalPeople">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Critical Alerts</span>
            <span class="stat-value highlight-red" id="criticalAlerts">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Safe Status</span>
            <span class="stat-value highlight-green" id="safeStatus">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Avg Confidence</span>
            <span class="stat-value" id="avgConfidence">0%</span>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Row -->
        <div class="top-row">
            <!-- Camera Grid -->
            <div class="card">
                <div class="card-header">
                    <h3><span class="live-dot"></span>Live Camera Feeds</h3>
                    <span class="badge-count">4 Cameras</span>
                </div>
                <div class="camera-grid">
                    <div class="camera-feed" id="cam-CAFETERIA">
                        <div class="feed-overlay">
                            <span class="cam-label">CAFETERIA</span>
                            <span class="cam-status" id="status-CAFETERIA">‚óè SAFE</span>
                        </div>
                        <div class="people-badge" id="people-CAFETERIA">0</div>
                    </div>
                    <div class="camera-feed" id="cam-EMPLOYEE_AREA">
                        <div class="feed-overlay">
                            <span class="cam-label">EMPLOYEE_AREA</span>
                            <span class="cam-status" id="status-EMPLOYEE_AREA">‚óè SAFE</span>
                        </div>
                        <div class="people-badge" id="people-EMPLOYEE_AREA">0</div>
                    </div>
                    <div class="camera-feed" id="cam-RECEPTION_AREA">
                        <div class="feed-overlay">
                            <span class="cam-label">RECEPTION_AREA</span>
                            <span class="cam-status" id="status-RECEPTION_AREA">‚óè SAFE</span>
                        </div>
                        <div class="people-badge" id="people-RECEPTION_AREA">0</div>
                    </div>
                    <div class="camera-feed critical" id="cam-BOSS_CABIN">
                        <div class="feed-overlay">
                            <span class="cam-label">BOSS_CABIN (Restricted)</span>
                            <span class="cam-status critical" id="status-BOSS_CABIN">‚óè CRITICAL</span>
                        </div>
                        <div class="people-badge critical" id="people-BOSS_CABIN">0</div>
                    </div>
                </div>
            </div>

            <!-- Live Alerts -->
            <div class="card">
                <div class="card-header">
                    <h3>üö® Critical Events</h3>
                    <span class="badge-count" id="alertCount">0 Events</span>
                </div>
                <div class="alerts-list" id="alertsList"></div>
            </div>
        </div>

        <!-- KPI Section -->
        <section class="kpi-section">
            <h2 class="section-title">Detection KPIs <span class="section-badge industry">SECURITY</span></h2>
            <p class="section-subtitle">Real-time detection metrics from HEAD_OFFICE cameras</p>

            <div class="kpi-grid-4">
                <div class="kpi-card-large critical">
                    <div class="kpi-header">
                        <span class="kpi-severity critical">CRITICAL</span>
                        <span class="kpi-icon-large">üö´</span>
                    </div>
                    <div class="kpi-body">
                        <h4 class="kpi-title">Restricted Access</h4>
                        <p class="kpi-description">Boss Cabin unauthorized entries</p>
                        <div class="kpi-stats">
                            <span class="kpi-main-value critical" id="kpi-restricted">0</span>
                            <div class="kpi-details">
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Today</span>
                                    <span class="detail-value trend-up" id="kpi-restricted-today">0</span>
                                </div>
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Camera</span>
                                    <span class="detail-value">BOSS_CABIN</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-footer"><span class="kpi-action">View Details ‚Üí</span></div>
                </div>

                <div class="kpi-card-large medium">
                    <div class="kpi-header">
                        <span class="kpi-severity medium">MONITORING</span>
                        <span class="kpi-icon-large">üë•</span>
                    </div>
                    <div class="kpi-body">
                        <h4 class="kpi-title">Peak Occupancy</h4>
                        <p class="kpi-description">Maximum people detected at once</p>
                        <div class="kpi-stats">
                            <span class="kpi-main-value medium" id="kpi-peak">0</span>
                            <div class="kpi-details">
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Location</span>
                                    <span class="detail-value" id="kpi-peak-location">-</span>
                                </div>
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Time</span>
                                    <span class="detail-value" id="kpi-peak-time">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-footer"><span class="kpi-action">View Heatmap ‚Üí</span></div>
                </div>

                <div class="kpi-card-large global">
                    <div class="kpi-header">
                        <span class="kpi-severity global">ANALYTICS</span>
                        <span class="kpi-icon-large">üìä</span>
                    </div>
                    <div class="kpi-body">
                        <h4 class="kpi-title">Total Detections</h4>
                        <p class="kpi-description">All object detections logged</p>
                        <div class="kpi-stats">
                            <span class="kpi-main-value global" id="kpi-detections">0</span>
                            <div class="kpi-details">
                                <div class="kpi-detail-row">
                                    <span class="detail-label">People</span>
                                    <span class="detail-value" id="kpi-people-count">0</span>
                                </div>
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Objects</span>
                                    <span class="detail-value" id="kpi-object-count">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-footer"><span class="kpi-action">View Report ‚Üí</span></div>
                </div>

                <div class="kpi-card-large success">
                    <div class="kpi-header">
                        <span class="kpi-severity success">HEALTHY</span>
                        <span class="kpi-icon-large">‚úÖ</span>
                    </div>
                    <div class="kpi-body">
                        <h4 class="kpi-title">System Status</h4>
                        <p class="kpi-description">Camera and detection health</p>
                        <div class="kpi-stats">
                            <span class="kpi-main-value success" id="kpi-health">100%</span>
                            <div class="kpi-details">
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Cameras Online</span>
                                    <span class="detail-value trend-good">4/4</span>
                                </div>
                                <div class="kpi-detail-row">
                                    <span class="detail-label">Uptime</span>
                                    <span class="detail-value">99.9%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-footer"><span class="kpi-action">View System ‚Üí</span></div>
                </div>
            </div>
        </section>

        <!-- Charts Row -->
        <div class="charts-row">
            <div class="card chart-card">
                <div class="card-header">
                    <h3>üìà People Count Over Time</h3>
                </div>
                <div class="chart-container"><canvas id="timelineChart"></canvas></div>
            </div>
            <div class="card chart-card">
                <div class="card-header">
                    <h3>üìç Detections by Camera</h3>
                </div>
                <div class="chart-container"><canvas id="cameraChart"></canvas></div>
            </div>
        </div>

        <!-- Object Distribution Row -->
        <div class="charts-row">
            <div class="card">
                <div class="card-header">
                    <h3>üéØ Object Detection Summary</h3>
                </div>
                <div class="horizontal-bars" id="objectBars"></div>
            </div>
            <div class="card chart-card">
                <div class="card-header">
                    <h3>‚ö° Events Timeline</h3>
                </div>
                <div class="chart-container"><canvas id="eventsChart"></canvas></div>
            </div>
        </div>

        <!-- Detection Log Table -->
        <div class="card table-card full-width-card">
            <div class="card-header">
                <h3>üìã Recent Detection Log</h3>
                <input type="text" class="search-input" id="searchInput" placeholder="Search detections...">
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>Camera</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>People</th>
                        <th>Key Detections</th>
                        <th>Confidence</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <span>¬© 2024 InvEye by Invincible Ocean ‚Ä¢ Powered by CloudTuner.ai</span>
        <span class="version">v2.0.0 ‚Ä¢ Real-time Detection Analytics</span>
    </footer>

    <script>
        // ===== Detection Data =====
        let detectionData = [];
        let eventsData = [];
        let metricsData = [];
        let objectStats = {};
        let cameraStats = { 'CAFETERIA': { people: 0, count: 0 }, 'EMPLOYEE_AREA': { people: 0, count: 0 }, 'RECEPTION_AREA': { people: 0, count: 0 }, 'BOSS_CABIN': { people: 0, count: 0 } };
        let timelineData = [];

        const colors = { critical: '#DC2626', medium: '#D97706', success: '#22C55E', primary: '#1E3A8A', secondary: '#3B82F6', global: '#7C3AED', grid: '#E2E8F0' };

        document.addEventListener('DOMContentLoaded', async () => {
            await loadDetectionData();
            processData();
            updateUI();
            initCharts();
            setInterval(updateCurrentTime, 1000);
        });

        async function loadDetectionData() {
            try {
                const response = await fetch('detection_log%20(1).json');
                detectionData = await response.json();
            } catch (error) {
                console.error('Error loading detection data:', error);
                detectionData = getSampleData();
            }
        }

        function processData() {
            eventsData = detectionData.filter(d => d.type === 'EVENT');
            metricsData = detectionData.filter(d => d.type === 'METRIC');
            objectStats = {};
            Object.keys(cameraStats).forEach(k => { cameraStats[k] = { people: 0, count: 0 }; });
            timelineData = [];

            metricsData.forEach(record => {
                const camId = record.meta.cam_id;
                const peopleCount = record.data?.people_count || 0;
                const detections = record.data?.detections || [];

                if (cameraStats[camId]) { cameraStats[camId].people += peopleCount; cameraStats[camId].count++; }

                detections.forEach(det => {
                    const label = det.label;
                    if (!objectStats[label]) { objectStats[label] = { count: 0, totalConf: 0 }; }
                    objectStats[label].count++;
                    objectStats[label].totalConf += det.confidence;
                });

                timelineData.push({ ts: new Date(record.meta.ts), cam: camId, people: peopleCount });
            });
            timelineData = timelineData.slice(-50);
        }

        function updateUI() {
            updateCurrentTime();
            updateStatsBar();
            updateCameraCards();
            updateAlerts();
            updateKPIs();
            updateObjectBars();
            updateTable();
        }

        function updateCurrentTime() {
            const timeEl = document.getElementById('currentTime');
            if (timeEl) { timeEl.textContent = new Date().toLocaleString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' }); }
        }

        function updateStatsBar() {
            document.getElementById('totalCameras').textContent = '4';
            document.getElementById('activeEvents').textContent = eventsData.length;
            let totalPeople = 0;
            metricsData.forEach(m => { totalPeople += m.data?.people_count || 0; });
            document.getElementById('totalPeople').textContent = totalPeople;
            document.getElementById('criticalAlerts').textContent = eventsData.filter(e => e.meta.status === 'CRITICAL').length;
            document.getElementById('safeStatus').textContent = metricsData.filter(m => m.meta.status === 'SAFE').length;
            let totalConf = 0, confCount = 0;
            metricsData.forEach(m => { (m.data?.detections || []).forEach(d => { totalConf += d.confidence; confCount++; }); });
            document.getElementById('avgConfidence').textContent = (confCount > 0 ? Math.round((totalConf / confCount) * 100) : 0) + '%';
        }

        function updateCameraCards() {
            ['CAFETERIA', 'EMPLOYEE_AREA', 'RECEPTION_AREA', 'BOSS_CABIN'].forEach(cam => {
                const latestMetric = metricsData.filter(m => m.meta.cam_id === cam).pop();
                const peopleEl = document.getElementById(`people-${cam}`);
                const statusEl = document.getElementById(`status-${cam}`);
                if (latestMetric) {
                    if (peopleEl) peopleEl.textContent = latestMetric.data?.people_count || 0;
                    if (statusEl && latestMetric.meta.status === 'SAFE') { statusEl.textContent = '‚óè SAFE'; statusEl.className = 'cam-status'; }
                }
                const latestEvent = eventsData.filter(e => e.meta.cam_id === cam).pop();
                if (latestEvent && latestEvent.meta.status === 'CRITICAL' && statusEl) { statusEl.textContent = '‚óè CRITICAL'; statusEl.className = 'cam-status critical'; }
            });
        }

        function updateAlerts() {
            const alertsList = document.getElementById('alertsList');
            const alertCountEl = document.getElementById('alertCount');
            if (!alertsList) return;
            const recentEvents = eventsData.slice(-10).reverse();
            alertCountEl.textContent = `${eventsData.length} Events`;
            alertsList.innerHTML = recentEvents.map(event => {
                const time = new Date(event.meta.ts).toLocaleTimeString();
                const triggers = event.event.triggers?.join(', ') || 'Unknown Event';
                const people = event.event.people_count || 0;
                return `<div class="alert-item critical"><span class="alert-icon">üö®</span><div class="alert-content"><span class="alert-text">${triggers}</span><span class="alert-meta">${event.meta.cam_id} ‚Ä¢ ${people} person(s)</span></div><span class="alert-time">${time}</span></div>`;
            }).join('');
            if (recentEvents.length === 0) {
                alertsList.innerHTML = `<div class="alert-item" style="background: var(--success-bg); border-left-color: var(--success);"><span class="alert-icon">‚úÖ</span><div class="alert-content"><span class="alert-text">No critical events</span><span class="alert-meta">All systems operating normally</span></div></div>`;
            }
        }

        function updateKPIs() {
            const restrictedCount = eventsData.filter(e => (e.event.triggers || []).some(t => t.includes('RESTRICTED'))).length;
            document.getElementById('kpi-restricted').textContent = restrictedCount;
            document.getElementById('kpi-restricted-today').textContent = restrictedCount;

            let peakPeople = 0, peakLocation = '-', peakTime = '-';
            metricsData.forEach(m => { const count = m.data?.people_count || 0; if (count > peakPeople) { peakPeople = count; peakLocation = m.meta.cam_id; peakTime = new Date(m.meta.ts).toLocaleTimeString(); } });
            document.getElementById('kpi-peak').textContent = peakPeople;
            document.getElementById('kpi-peak-location').textContent = peakLocation;
            document.getElementById('kpi-peak-time').textContent = peakTime;

            let totalDetections = 0, personCount = 0, objectCount = 0;
            metricsData.forEach(m => { const dets = m.data?.detections || []; totalDetections += dets.length; personCount += dets.filter(d => d.label === 'person').length; objectCount += dets.filter(d => d.label !== 'person').length; });
            document.getElementById('kpi-detections').textContent = totalDetections;
            document.getElementById('kpi-people-count').textContent = personCount;
            document.getElementById('kpi-object-count').textContent = objectCount;
        }

        function updateObjectBars() {
            const container = document.getElementById('objectBars');
            if (!container) return;
            const sorted = Object.entries(objectStats).sort((a, b) => b[1].count - a[1].count).slice(0, 8);
            const maxCount = sorted.length > 0 ? sorted[0][1].count : 1;
            container.innerHTML = sorted.map(([label, stats]) => {
                const pct = Math.round((stats.count / maxCount) * 100);
                const avgConf = Math.round((stats.totalConf / stats.count) * 100);
                const c = label === 'person' ? 'person' : label === 'chair' ? 'chair' : label === 'laptop' ? 'laptop' : label === 'tv' ? 'tv' : label === 'potted plant' ? 'potted-plant' : 'other';
                return `<div class="bar-item"><span class="bar-label">${label}</span><div class="bar-track"><div class="bar-fill ${c}" style="width: ${pct}%">${avgConf}%</div></div><span class="bar-value">${stats.count}</span></div>`;
            }).join('');
        }

        function updateTable() {
            const tbody = document.getElementById('tableBody');
            if (!tbody) return;
            const recentRecords = detectionData.slice(-20).reverse();
            tbody.innerHTML = recentRecords.map(record => {
                const isEvent = record.type === 'EVENT';
                const time = new Date(record.meta.ts).toLocaleString();
                const status = record.meta.status;
                const peopleCount = isEvent ? record.event.people_count : (record.data?.people_count || 0);
                const detections = isEvent ? record.event.detections : (record.data?.detections || []);
                const topDets = detections.slice(0, 3).map(d => d.label);
                const avgConf = detections.length > 0 ? Math.round((detections.reduce((s, d) => s + d.confidence, 0) / detections.length) * 100) : 0;
                return `<tr class="${isEvent ? 'warning-row' : ''}"><td>${time}</td><td>${record.meta.cam_id}</td><td><span class="type-badge ${record.type.toLowerCase()}">${record.type}</span></td><td><span class="status-badge ${status.toLowerCase()}">${status}</span></td><td>${peopleCount}</td><td><div class="detection-tags">${topDets.map(t => `<span class="detection-tag">${t}</span>`).join('')}${detections.length > 3 ? `<span class="detection-tag">+${detections.length - 3}</span>` : ''}</div></td><td><div class="confidence-bar"><div class="confidence-fill" style="width: ${avgConf}%"></div></div></td></tr>`;
            }).join('');
        }

        function initCharts() {
            initTimelineChart();
            initCameraChart();
            initEventsChart();
        }

        function initTimelineChart() {
            const ctx = document.getElementById('timelineChart');
            if (!ctx) return;
            const labels = timelineData.map(d => d.ts.toLocaleTimeString());
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'CAFETERIA', data: timelineData.map(d => d.cam === 'CAFETERIA' ? d.people : null), borderColor: '#3B82F6', borderWidth: 2, tension: 0.3, fill: false, pointRadius: 2, spanGaps: true },
                        { label: 'EMPLOYEE_AREA', data: timelineData.map(d => d.cam === 'EMPLOYEE_AREA' ? d.people : null), borderColor: '#22C55E', borderWidth: 2, tension: 0.3, fill: false, pointRadius: 2, spanGaps: true },
                        { label: 'RECEPTION', data: timelineData.map(d => d.cam === 'RECEPTION_AREA' ? d.people : null), borderColor: '#F59E0B', borderWidth: 2, tension: 0.3, fill: false, pointRadius: 2, spanGaps: true },
                        { label: 'BOSS_CABIN', data: timelineData.map(d => d.cam === 'BOSS_CABIN' ? d.people : null), borderColor: '#DC2626', borderWidth: 2, tension: 0.3, fill: false, pointRadius: 2, spanGaps: true }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top', labels: { usePointStyle: true, padding: 15, font: { size: 10 } } } }, scales: { x: { display: false }, y: { beginAtZero: true, grid: { color: colors.grid } } } }
            });
        }

        function initCameraChart() {
            const ctx = document.getElementById('cameraChart');
            if (!ctx) return;
            new Chart(ctx, {
                type: 'doughnut',
                data: { labels: Object.keys(cameraStats), datasets: [{ data: Object.values(cameraStats).map(c => c.count), backgroundColor: ['#3B82F6', '#22C55E', '#F59E0B', '#DC2626'], borderWidth: 0 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { usePointStyle: true, padding: 15, font: { size: 10 } } } } }
            });
        }

        function initEventsChart() {
            const ctx = document.getElementById('eventsChart');
            if (!ctx) return;
            const hourCounts = {};
            eventsData.forEach(e => { const hour = new Date(e.meta.ts).getHours(); hourCounts[hour] = (hourCounts[hour] || 0) + 1; });
            new Chart(ctx, {
                type: 'bar',
                data: { labels: Object.keys(hourCounts).map(h => `${h}:00`), datasets: [{ label: 'Events', data: Object.values(hourCounts), backgroundColor: '#DC262680', borderColor: '#DC2626', borderWidth: 1 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false } }, y: { beginAtZero: true, grid: { color: colors.grid } } } }
            });
        }

        document.getElementById('searchInput')?.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('#tableBody tr').forEach(row => { row.style.display = row.textContent.toLowerCase().includes(query) ? '' : 'none'; });
        });

        function getSampleData() {
            return [
                { "type": "METRIC", "meta": { "ts": "2025-12-16T13:37:10.971002Z", "cam_id": "CAFETERIA", "site": "HEAD_OFFICE", "status": "SAFE" }, "data": { "people_count": 8, "detections": [{ "class_id": 0, "label": "person", "confidence": 0.9048 }] } },
                { "type": "METRIC", "meta": { "ts": "2025-12-16T13:37:10.974344Z", "cam_id": "EMPLOYEE_AREA", "site": "HEAD_OFFICE", "status": "SAFE" }, "data": { "people_count": 11, "detections": [{ "class_id": 0, "label": "person", "confidence": 0.9243 }] } },
                { "type": "EVENT", "meta": { "ts": "2025-12-16T13:43:49.138755Z", "cam_id": "BOSS_CABIN", "site": "HEAD_OFFICE", "status": "CRITICAL" }, "event": { "triggers": ["RESTRICTED_ACCESS_BOSS_CABIN"], "people_count": 1, "detections": [{ "class_id": 0, "label": "person", "confidence": 0.4822 }], "capture_triggered": true } }
            ];
        }
    </script>
</body>

</html>