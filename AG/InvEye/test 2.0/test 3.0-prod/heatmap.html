<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heatmap | InvEye</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #F8FAFC;
            color: #1E293B;
            min-height: 100vh;
        }

        .header {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 1px solid #E2E8F0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .back-btn {
            padding: 0.5rem 1rem;
            background: #F1F5F9;
            border: 1px solid #E2E8F0;
            border-radius: 6px;
            color: #475569;
            text-decoration: none;
        }

        .back-btn:hover {
            background: #E2E8F0;
        }

        .page-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .main-content {
            padding: 1.5rem 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .section {
            background: white;
            border-radius: 8px;
            border: 1px solid #E2E8F0;
            margin-bottom: 1.5rem;
        }

        .section-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #E2E8F0;
        }

        .section-header h2 {
            font-size: 1rem;
            font-weight: 600;
        }

        .section-body {
            padding: 1.5rem;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .camera-heatmap {
            background: #F8FAFC;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 1px solid #E2E8F0;
        }

        .camera-heatmap h3 {
            font-size: 0.85rem;
            color: #64748B;
            margin-bottom: 0.75rem;
        }

        .heatmap-visual {
            height: 100px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            font-weight: 700;
            color: white;
        }

        .heatmap-visual.low {
            background: linear-gradient(135deg, #86EFAC 0%, #22C55E 100%);
        }

        .heatmap-visual.medium {
            background: linear-gradient(135deg, #FDE68A 0%, #F59E0B 100%);
        }

        .heatmap-visual.high {
            background: linear-gradient(135deg, #FCA5A5 0%, #DC2626 100%);
        }

        .peak-info {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #64748B;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
        }

        .time-slot {
            padding: 0.75rem 0.5rem;
            border-radius: 6px;
            text-align: center;
            font-size: 0.75rem;
            color: #1E293B;
        }

        .time-slot.low {
            background: #DCFCE7;
        }

        .time-slot.medium {
            background: #FEF3C7;
        }

        .time-slot.high {
            background: #FEE2E2;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
            font-size: 0.8rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-dot.low {
            background: #22C55E;
        }

        .legend-dot.medium {
            background: #F59E0B;
        }

        .legend-dot.high {
            background: #DC2626;
        }
    </style>
</head>

<body>
    <header class="header">
        <a href="index.html" class="back-btn">← Back</a>
        <h1 class="page-title">Occupancy Heatmap</h1>
    </header>

    <main class="main-content">
        <div class="section">
            <div class="section-header">
                <h2>Peak Occupancy by Location</h2>
                <p style="font-size: 0.8rem; color: #64748B; margin-top: 0.25rem;">Data from Jan 2, 2026 • HEAD_OFFICE
                </p>
            </div>
            <div class="section-body">
                <div class="heatmap-grid">
                    <div class="camera-heatmap">
                        <h3>EMPLOYEE AREA</h3>
                        <div class="heatmap-visual high" id="emp-heat">8</div>
                        <p class="peak-info">Peak: 8 people • 17 events</p>
                    </div>
                    <div class="camera-heatmap">
                        <h3>RECEPTION AREA</h3>
                        <div class="heatmap-visual medium" id="rec-heat">6</div>
                        <p class="peak-info">Peak: 6 people • 312 events</p>
                    </div>
                    <div class="camera-heatmap">
                        <h3>CAFETERIA</h3>
                        <div class="heatmap-visual low" id="caf-heat">2</div>
                        <p class="peak-info">Peak: 2 people • 16 events</p>
                    </div>
                    <div class="camera-heatmap">
                        <h3>BOSS CABIN</h3>
                        <div class="heatmap-visual low" id="boss-heat">2</div>
                        <p class="peak-info">Peak: 2 people • 382 events</p>
                    </div>
                </div>
                <div class="legend">
                    <div class="legend-item"><span class="legend-dot low"></span> Low (1-3)</div>
                    <div class="legend-item"><span class="legend-dot medium"></span> Medium (4-6)</div>
                    <div class="legend-item"><span class="legend-dot high"></span> High (7+)</div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2>Hourly Activity (All Cameras)</h2>
            </div>
            <div class="section-body">
                <div class="time-grid">
                    <div class="time-slot low">5 AM<br><strong>1</strong></div>
                    <div class="time-slot low">6 AM<br><strong>2</strong></div>
                    <div class="time-slot low">7 AM<br><strong>1</strong></div>
                    <div class="time-slot low">8 AM<br><strong>2</strong></div>
                    <div class="time-slot medium">9 AM<br><strong>4</strong></div>
                    <div class="time-slot high">10 AM<br><strong>8</strong></div>
                </div>
                <div class="time-grid" style="margin-top: 0.5rem;">
                    <div class="time-slot high">11 AM<br><strong>7</strong></div>
                    <div class="time-slot high">12 PM<br><strong>8</strong></div>
                    <div class="time-slot medium">1 PM<br><strong>6</strong></div>
                    <div class="time-slot medium">2 PM<br><strong>5</strong></div>
                    <div class="time-slot medium">3 PM<br><strong>6</strong></div>
                    <div class="time-slot medium">4 PM<br><strong>5</strong></div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2>Critical Events Summary</h2>
            </div>
            <div class="section-body">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div
                        style="background: #FEE2E2; padding: 1rem; border-radius: 8px; border-left: 4px solid #DC2626;">
                        <div style="font-size: 2rem; font-weight: 700; color: #DC2626;">23</div>
                        <div style="font-size: 0.85rem; color: #991B1B;">UNAUTHORIZED_STRANGER</div>
                    </div>
                    <div
                        style="background: #FEF3C7; padding: 1rem; border-radius: 8px; border-left: 4px solid #F59E0B;">
                        <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;">18</div>
                        <div style="font-size: 0.85rem; color: #92400E;">RESTRICTED_ACCESS</div>
                    </div>
                    <div
                        style="background: #DBEAFE; padding: 1rem; border-radius: 8px; border-left: 4px solid #3B82F6;">
                        <div style="font-size: 2rem; font-weight: 700; color: #3B82F6;">3</div>
                        <div style="font-size: 0.85rem; color: #1E40AF;">CROWD_VIOLATION</div>
                    </div>
                    <div
                        style="background: #DCFCE7; padding: 1rem; border-radius: 8px; border-left: 4px solid #22C55E;">
                        <div style="font-size: 2rem; font-weight: 700; color: #22C55E;">2844</div>
                        <div style="font-size: 0.85rem; color: #166534;">Total Events</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Data from camera_events_202601021755.csv
        const liveData = {
            EMPLOYEE_AREA: { peak: 8, events: 17 },
            RECEPTION_AREA: { peak: 6, events: 312 },
            CAFETERIA: { peak: 2, events: 16 },
            BOSS_CABIN: { peak: 2, events: 382 }
        };

        const cameraStats = JSON.parse(localStorage.getItem('cameraStats') || '{}');
        const cameras = [['CAFETERIA', 'caf-heat'], ['EMPLOYEE_AREA', 'emp-heat'], ['RECEPTION_AREA', 'rec-heat'], ['BOSS_CABIN', 'boss-heat']];

        cameras.forEach(([cam, id]) => {
            const stats = cameraStats[cam] || liveData[cam];
            if (stats) {
                const peak = stats.peak || (stats.count > 0 ? Math.round(stats.people / stats.count) : 0);
                const el = document.getElementById(id);
                if (el) {
                    el.textContent = peak;
                    el.className = 'heatmap-visual ' + (peak > 6 ? 'high' : peak > 3 ? 'medium' : 'low');
                }
            }
        });
    </script>
</body>

</html>